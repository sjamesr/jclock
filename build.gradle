plugins {
  id 'java'

  // Automatic formatting
  id 'com.github.sherter.google-java-format' version '0.3.2'
}

repositories {
  mavenCentral()
}

// If Java formatter checks fail, tell the user how to fix them.
task printFormatHelperMessage {
    doLast {
        throw new GradleException('google-java-format is required.\n' +
            'Use ./gradlew googleJavaFormat to reformat the broken files')
    }
}
verifyGoogleJavaFormat.finalizedBy printFormatHelperMessage
printFormatHelperMessage.onlyIf { verifyGoogleJavaFormat.state.failure != null }
